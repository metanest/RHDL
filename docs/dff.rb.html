<html>
<head>
<title>~/development/RHDL/examples/dff.rb.html</title>
<meta name="Generator" content="Vim/6.1">
</head>
<body bgcolor="#ffffff" text="#000000">
<pre>
<font color="#a020f0">require</font> <font color="#6858c8">'</font><font color="#f800f8">RHDL</font><font color="#6858c8">'</font>
<font color="#a020f0">class </font><font color="#288850"><b>DFF </b></font>&lt; <font color="#6858c8">RHDL</font>::<font color="#6858c8">Design</font>
<font color="#a020f0">  include</font> <font color="#6858c8">RHDL</font>
<font color="#a020f0">  def </font><font color="#008888">initialize</font>(clk,rst,d,q)
    super()
    define_behavior {
      process(clk) {
<font color="#a02828"><b>        if</b></font> clk == <font color="#6858c8">'</font><font color="#f800f8">1</font><font color="#6858c8">'</font> <font color="#a02828"><b>and</b></font> clk.event
<font color="#a02828"><b>          if</b></font> rst == <font color="#6858c8">'</font><font color="#f800f8">1</font><font color="#6858c8">'</font>
            q &lt;&lt; <font color="#f800f8">0</font>
          <font color="#a02828"><b>else</b></font>
            q &lt;&lt; d
          <font color="#a02828"><b>end</b></font>
        <font color="#a02828"><b>end</b></font>
      }
    }
  <font color="#a020f0">end</font>
<font color="#a020f0">end</font>

<font color="#a02828"><b>if</b></font> <font color="#6858c8">$0</font> == __FILE__
<font color="#a020f0">  include</font> <font color="#6858c8">RHDL</font>
<font color="#a020f0">  include</font> <font color="#6858c8">Simulator</font>
  clk = <font color="#6858c8">Signal</font>(<font color="#6858c8">Bit</font>(<font color="#6858c8">'</font><font color="#f800f8">0</font><font color="#6858c8">'</font>))
  rst = <font color="#6858c8">Signal</font>(<font color="#6858c8">Bit</font>(<font color="#6858c8">'</font><font color="#f800f8">0</font><font color="#6858c8">'</font>))
  d   = <font color="#6858c8">Signal</font>(<font color="#6858c8">Bit</font>(<font color="#6858c8">'</font><font color="#f800f8">0</font><font color="#6858c8">'</font>))
  q   = <font color="#6858c8">Signal</font>(<font color="#6858c8">Bit</font>())
  dff = <font color="#6858c8">DFF</font>.new(clk,rst,d,q)

  puts <font color="#6858c8">&quot;</font><font color="#f800f8">clk=</font><font color="#6858c8">#{clk}</font><font color="#f800f8">, rst=</font><font color="#6858c8">#{rst}</font><font color="#f800f8">, d=</font><font color="#6858c8">#{d}</font><font color="#f800f8">, q=</font><font color="#6858c8">#{q}</font><font color="#6858c8">&quot;</font>
  step { puts <font color="#6858c8">&quot;</font><font color="#f800f8">clk=</font><font color="#6858c8">#{clk}</font><font color="#f800f8">, rst=</font><font color="#6858c8">#{rst}</font><font color="#f800f8">, d=</font><font color="#6858c8">#{d}</font><font color="#f800f8">, q=</font><font color="#6858c8">#{q}</font><font color="#6858c8">&quot;</font> }
  d   &lt;&lt; <font color="#6858c8">'</font><font color="#f800f8">1</font><font color="#6858c8">'</font>
  clk &lt;&lt; <font color="#6858c8">'</font><font color="#f800f8">1</font><font color="#6858c8">'</font>
  step
  clk &lt;&lt; <font color="#6858c8">'</font><font color="#f800f8">0</font><font color="#6858c8">'</font>
  step
  puts <font color="#6858c8">&quot;</font><font color="#f800f8">Now activate RESET:</font><font color="#6858c8">&quot;</font>
  rst &lt;&lt; <font color="#6858c8">'</font><font color="#f800f8">1</font><font color="#6858c8">'</font>
  step
  clk &lt;&lt; <font color="#6858c8">'</font><font color="#f800f8">1</font><font color="#6858c8">'</font>
  step
  rst &lt;&lt; <font color="#6858c8">'</font><font color="#f800f8">0</font><font color="#6858c8">'</font>
  clk &lt;&lt; <font color="#6858c8">'</font><font color="#f800f8">0</font><font color="#6858c8">'</font>
  puts <font color="#6858c8">&quot;</font><font color="#f800f8">Now de-activate RESET:</font><font color="#6858c8">&quot;</font>
  step
  clk &lt;&lt; <font color="#6858c8">'</font><font color="#f800f8">1</font><font color="#6858c8">'</font>
  step
  clk &lt;&lt; <font color="#6858c8">'</font><font color="#f800f8">0</font><font color="#6858c8">'</font>
  d   &lt;&lt; <font color="#6858c8">'</font><font color="#f800f8">0</font><font color="#6858c8">'</font>
  step
  clk &lt;&lt; <font color="#6858c8">'</font><font color="#f800f8">1</font><font color="#6858c8">'</font>
  step



<font color="#a02828"><b>end</b></font>
</pre>
</body>
</html>
